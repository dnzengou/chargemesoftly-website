<!-- Scripts --> 
<script type="text/javascript">
     // Funcion para guardar nueva empresa $('#guardar-nuevo').click(function() { var datos = new FormData(); 
     // FormData (Conjunto de datos) llamado "datos" 
     // Variables: var nombre = $("#nuevo-nombre").val(); var latitud = $("#nuevo-latitud").val(); var longitud = $("#nuevo-longitud").val(); var categoria = $("#nuevo-categoria").val(); var descorta = $("#nuevo-descripcion-mapa").val(); var descompleta = $("#nuevo-descripcion-completa").val(); 
     // Agregar variables a FormData: datos.append('nombre',nombre ); datos.append('latitud',latitud ); datos.append('longitud',longitud ); datos.append('categoria',categoria ); datos.append('descorta',descorta ); datos.append('descompleta',descompleta ); var archivos = document.getElementById("nuevo-imagen-mapa"); 
     //Creamos un objeto con el elemento que contiene los archivos: el campo input file, que tiene el id = 'archivos' var archivo = archivos.files; //Obtenemos los archivos seleccionados en el imput for(i=0; i<archivo.length; i ){ datos.append('archivo' i,archivo[i]); 
     //Añadimos cada archivo a el arreglo con un indice direfente } if(archivo.length != 0){ var siarchivos = 1; datos.append( 'siarchivos', siarchivos); }else{ var siarchivos = 0; datos.append( 'siarchivos', siarchivos); } 
     // Validaciones: if(nombre == ""){alert("El nombre es requerido");$("#nuevo-nombre").focus();return false;} if(latitud == ""){alert("La direccion es requerida");$("#nuevo-latitud").focus();return false;} if(longitud == ""){alert("El armamento es requerido");$("#nuevo-longitud").focus();return false;} if(descorta == ""){alert("El nombre del armamento es requerido");$("#nuevo-descripcion-mapa").focus();return false;} if(descompleta == ""){alert("El comandante es requerido");$("#nuevo-descripcion-completa").focus();return false;} $.ajax({ url: "ajax/ajax_nueva_empresa.php", type: 'POST', contentType:false, data: datos, processData:false, cache: false, success: function(html){ setTimeout(function() { window.location=window.location;},500); //$("#error").html(html); } }) }); 
     // Buscador $(function(){ $("#buscar").keyup(function(){ var palabras = $(this).val(); if(palabras!=''){ $.ajax({ type: "POST", url: "buscar.php", data: {palabras:palabras}, cache: false, success: function(html){ $("#resultados").html(html).show(); } }); } return false; }); jQuery("#resultados").on("click",function(e){ var $clicked = $(e.target); var $name = $clicked.find('.name').html(); var decoded = $("<div/>").html($name).text(); $('#buscar').val(decoded); }); jQuery(document).on("click", function(e){ var $clicked = $(e.target); if (! $clicked.hasClass("search")){ jQuery("#resultados").fadeOut(); } }); $('#buscar').click(function(){ jQuery("#resultados").fadeIn(); }); }); 
     // Función para obtener la ubicación actual function getLocation() { if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(showPosition); }else{ alert("Geolocation is not supported by this browser."); } } function showPosition(position) { var lat = position.coords.latitude; var lng = position.coords.longitude; map.setCenter(new google.maps.LatLng(lat, lng)); } 
</script>
<div id="error">
</div>
</body>